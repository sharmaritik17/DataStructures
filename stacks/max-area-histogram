https://practice.geeksforgeeks.org/problems/maximum-rectangular-area-in-a-histogram/0
/*^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^*/
#include  <bits/stdc++.h>
#define ii      int
#define ll      long long
#define mod     1000000009
#define FIO     ios_base::sync_with_stdio(0); cin.tie(0); cout.tie(0)
#define nul     NULL
#define  z "\n"
#include <iostream>
#include <vector>
#include <climits>
#define ff first
#define ss second
using namespace std;
//#include "ComplexNumbers.h"
/* ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*/
ll getMaxArea(ll *arr,ll n){
     vector<ll> left,right;
     stack<ll> s;

     for(ll i=0;i<n;i++){
     	while(!s.empty() && arr[s.top()]>=arr[i]){
     		s.pop();
     	}

     	if(s.empty()){
     		left.push_back(-1);
     	}
     	else{
     		left.push_back(s.top());
     	}

     	s.push(i);
     }

       while(!s.empty()){
      	s.pop();
        }

      for(ll i=n-1;i>=0;i--){
      	while(!s.empty() && arr[s.top()]>=arr[i]){
      		s.pop();
      	}

      	if(s.empty()){
      		right.push_back(n);
      	}
      	else{
      		right.push_back(s.top());
      	}

      	s.push(i);
      }

      ll max_area = 0;
      ll calc_area = 0;
      for(ll i=0;i<n;i++){
      	calc_area = arr[i]*(right[n-1-i] - left[i]-1);
      	max_area = max(max_area,calc_area);
      }

      return max_area;
}
int main(){
	ll ntc;
	cin>>ntc;
	while(ntc--){
		ll n;
		cin>>n;
      ll arr[n];
      for(ll i=0;i<n;i++){
      	cin>>arr[i];
      }
      cout<<getMaxArea(arr,n)<<z;
	}

	return 0;
}
